
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Wprowadzenie do biblioteki River &#8212; Przetwarzanie danych złożonych</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Wykrywanie dryftu konceptu" href="concept_drift.html" />
    <link rel="prev" title="Klasyfikacja hierarchiczna" href="hierarchical_classification.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Przetwarzanie danych złożonych</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Przetwarzanie danych złożonych
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Laboratorium 1
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="zasady.html">
   Zasady
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Laboratorium 2
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="hawkes.html">
   Proces Hawkesa
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Laboratorium 4
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="collective_classification.html">
   Klasyfikacja kolektywna
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Laboratorium 5
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="hierarchical_classification.html">
   Klasyfikacja hierarchiczna
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Laboratorium 7
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Wprowadzenie do biblioteki River
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Laboratorium 8
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="concept_drift.html">
   Wykrywanie dryftu konceptu
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Laboratorium 9
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="classification_of_streaming_data.html">
   Ewaluacja jednoklasowych algorytmów klasyfikacji w danych strumieniowych
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/pwr-ai/przetwarzanie-danych-zlozonych/master?urlpath=tree/docs/labs/river_ml_introduction.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/labs/river_ml_introduction.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wczytywanie-zbiorow">
   Wczytywanie zbiorów
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loadery-biblioteki-river">
     Loadery biblioteki river
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#zbiory-danych-w-bibliotece-river">
     Zbiory danych w bibliotece river
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#wczytywanie-zbioru-movielens100k">
     Wczytywanie zbioru MovieLens100K
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dostep-do-elementow-w-zbiorze">
     Dostęp do elementów w zbiorze
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#petla">
     Pętla
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pobieranie-kilku-elementow-ze-zbioru">
     Pobieranie kilku elementów ze zbioru
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#wczytanie-zbioru-za-pomoca-dostepnych-loaderow">
     Wczytanie zbioru za pomocą dostępnych loaderów
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#wczytywanie-za-pomoca-bilioteki-pandas">
     Wczytywanie za pomocą bilioteki pandas
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#przetwarzanie-zbioru">
   Przetwarzanie zbioru
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rozklad-klas-wczytany-caly-zbior">
     Rozkład klas - wczytany cały zbiór
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rozklad-klas-podejscie-strumieniowe">
     Rozkład klas - podejście strumieniowe
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rozklad-klas-podejscie-strumieniowe-przyblizone">
     Rozkład klas - podejście strumieniowe przybliżone
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#porownanie-wartosci">
       Porównanie wartości
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transformacje-cech">
   Transformacje cech
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#agregacje">
     Agregacje
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#obliczenie-liczby-recenzji-uzytkownika">
     Obliczenie liczby recenzji użytkownika
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aggregacje-typu-rolling">
     Aggregacje typu Rolling
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Wprowadzenie do biblioteki River</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wczytywanie-zbiorow">
   Wczytywanie zbiorów
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loadery-biblioteki-river">
     Loadery biblioteki river
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#zbiory-danych-w-bibliotece-river">
     Zbiory danych w bibliotece river
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#wczytywanie-zbioru-movielens100k">
     Wczytywanie zbioru MovieLens100K
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dostep-do-elementow-w-zbiorze">
     Dostęp do elementów w zbiorze
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#petla">
     Pętla
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pobieranie-kilku-elementow-ze-zbioru">
     Pobieranie kilku elementów ze zbioru
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#wczytanie-zbioru-za-pomoca-dostepnych-loaderow">
     Wczytanie zbioru za pomocą dostępnych loaderów
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#wczytywanie-za-pomoca-bilioteki-pandas">
     Wczytywanie za pomocą bilioteki pandas
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#przetwarzanie-zbioru">
   Przetwarzanie zbioru
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rozklad-klas-wczytany-caly-zbior">
     Rozkład klas - wczytany cały zbiór
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rozklad-klas-podejscie-strumieniowe">
     Rozkład klas - podejście strumieniowe
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rozklad-klas-podejscie-strumieniowe-przyblizone">
     Rozkład klas - podejście strumieniowe przybliżone
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#porownanie-wartosci">
       Porównanie wartości
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transformacje-cech">
   Transformacje cech
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#agregacje">
     Agregacje
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#obliczenie-liczby-recenzji-uzytkownika">
     Obliczenie liczby recenzji użytkownika
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aggregacje-typu-rolling">
     Aggregacje typu Rolling
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="wprowadzenie-do-biblioteki-river">
<h1>Wprowadzenie do biblioteki River<a class="headerlink" href="#wprowadzenie-do-biblioteki-river" title="Permalink to this headline">#</a></h1>
<p><a class="reference external" href="https://github.com/online-ml/river">River</a> jest obecnie kluczową biblioteką z dziedziny online machine learning. Jest wynikiem połączenia dwóch bibliotek <a class="reference external" href="https://github.com/MaxHalford/creme">creme</a> i <a class="reference external" href="https://github.com/scikit-multiflow/scikit-multiflow">scikit-multiflow</a>. Jest głównie napisana w języku Python, przy czym intensywne obliczeniowo operacje przeniesiono do języka Rust.</p>
<p>Jej główna funkcjonalność obejmuje <a class="reference external" href="http://m.in">m.in</a>.:</p>
<ul class="simple">
<li><p>Modele liniowe i Klasyczne modele maszynowego uczenia</p></li>
<li><p>Wykrywanie anomalii czy  koncept dryftu</p></li>
<li><p>Systemy rekomendycjne</p></li>
<li><p>Prognozowanie na podstawie szeregów czasowych</p></li>
<li><p>Uczenie niezbalansowanych danych</p></li>
<li><p>Klasteryzacja</p></li>
<li><p>Metryki i statystyki dedykowane do Online Machine Learningu</p></li>
</ul>
<p>Strona główna jest dostępna pod adresem: <a class="reference external" href="https://riverml.xyz/0.14.0/">[LINK]</a>
Tutoriale <a class="reference external" href="https://riverml.xyz/0.14.0/recipes/reading-data/">[LINK]</a>, Przykłady <a class="reference external" href="https://riverml.xyz/0.14.0/examples/batch-to-online/">[LINK]</a>, Dokumentacja <a class="reference external" href="https://riverml.xyz/0.14.0/api/overview/">[LINK]</a></p>
<section id="wczytywanie-zbiorow">
<h2>Wczytywanie zbiorów<a class="headerlink" href="#wczytywanie-zbiorow" title="Permalink to this headline">#</a></h2>
<section id="loadery-biblioteki-river">
<h3>Loadery biblioteki river<a class="headerlink" href="#loadery-biblioteki-river" title="Permalink to this headline">#</a></h3>
<p>Przedstawienie formatów danych wspierających przez bibliotekę river przedstawiono w poniższej tabeli:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Format danych</p></th>
<th class="head"><p>Loader</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>arff</p></td>
<td><p><a class="reference external" href="https://riverml.xyz/0.14.0/api/stream/iter-arff/">stream.iter_arff</a></p></td>
</tr>
<tr class="row-odd"><td><p>numpy array</p></td>
<td><p><a class="reference external" href="https://riverml.xyz/0.14.0/api/stream/iter-array/">stream.iter_array</a></p></td>
</tr>
<tr class="row-even"><td><p>csv</p></td>
<td><p><a class="reference external" href="https://riverml.xyz/0.14.0/api/stream/iter-csv/">stream.iter_csv</a></p></td>
</tr>
<tr class="row-odd"><td><p>LIBSVM</p></td>
<td><p><a class="reference external" href="https://riverml.xyz/0.14.0/api/stream/iter-libsvm/">stream.iter_libsvm</a></p></td>
</tr>
<tr class="row-even"><td><p>pandas DataFrame</p></td>
<td><p><a class="reference external" href="https://riverml.xyz/0.14.0/api/stream/iter-pandas/">stream.iter_pandas</a></p></td>
</tr>
<tr class="row-odd"><td><p>sklearn dataset</p></td>
<td><p><a class="reference external" href="https://riverml.xyz/0.14.0/api/stream/iter-sklearn-dataset/">stream.iter_sklearn_dataset</a></p></td>
</tr>
<tr class="row-even"><td><p>sql</p></td>
<td><p><a class="reference external" href="https://riverml.xyz/0.14.0/api/stream/iter-sql/">stream.iter_sql</a></p></td>
</tr>
<tr class="row-odd"><td><p>vaex DataFrame</p></td>
<td><p><a class="reference external" href="https://riverml.xyz/0.14.0/api/stream/iter-vaex/">stream.iter_vaex</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="zbiory-danych-w-bibliotece-river">
<h3>Zbiory danych w bibliotece river<a class="headerlink" href="#zbiory-danych-w-bibliotece-river" title="Permalink to this headline">#</a></h3>
<p>River udostępnia pakiet zbiorów danych wraz z odpowiednimi loaderami.
Pełną listę zbiorów można przejrzeć na stronie biblioteki <a class="reference external" href="https://riverml.xyz/0.13.0/api/datasets/AirlinePassengers/">[LINK]</a></p>
</section>
<section id="wczytywanie-zbioru-movielens100k">
<h3>Wczytywanie zbioru MovieLens100K<a class="headerlink" href="#wczytywanie-zbioru-movielens100k" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">river.datasets</span> <span class="kn">import</span> <span class="n">MovieLens100K</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">MovieLens100K</span><span class="p">()</span>
<span class="n">ds_path</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">path</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MovieLens 100K dataset.

MovieLens datasets were collected by the GroupLens Research Project at the University of
Minnesota. This dataset consists of 100,000 ratings (1-5) from 943 users on 1682 movies. Each
user has rated at least 20 movies. User and movie information are provided. The data was
collected through the MovieLens web site (movielens.umn.edu) during the seven-month period from
September 19th, 1997 through April 22nd, 1998.

      Name  MovieLens100K                                            
      Task  Regression                                               
   Samples  100,000                                                  
  Features  10                                                       
    Sparse  False                                                    
      Path  /Users/kamiltagowski/river_data/MovieLens100K/ml_100k.csv
       URL  https://maxhalford.github.io/files/datasets/ml_100k.zip  
      Size  10.55 MB                                                 
Downloaded  True                                                     

Parameters
----------
    unpack_user_and_item
        Whether or not the user and item should be extracted from the context and included as extra
        keyword arguments.
</pre></div>
</div>
</div>
</div>
</section>
<section id="dostep-do-elementow-w-zbiorze">
<h3>Dostęp do elementów w zbiorze<a class="headerlink" href="#dostep-do-elementow-w-zbiorze" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">ds</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>({&#39;user&#39;: &#39;259&#39;,
  &#39;item&#39;: &#39;255&#39;,
  &#39;timestamp&#39;: 874731910000000000,
  &#39;title&#39;: &quot;My Best Friend&#39;s Wedding (1997)&quot;,
  &#39;release_date&#39;: 866764800000000000,
  &#39;genres&#39;: &#39;comedy, romance&#39;,
  &#39;age&#39;: 21.0,
  &#39;gender&#39;: &#39;M&#39;,
  &#39;occupation&#39;: &#39;student&#39;,
  &#39;zip_code&#39;: &#39;48823&#39;},
 4.0)
</pre></div>
</div>
</div>
</div>
</section>
<section id="petla">
<h3>Pętla<a class="headerlink" href="#petla" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import w celu czytelniejszego wyświetlania słowników</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display_pretty</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">display_pretty</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: &#39;259&#39;,
 &#39;item&#39;: &#39;255&#39;,
 &#39;timestamp&#39;: 874731910000000000,
 &#39;title&#39;: &quot;My Best Friend&#39;s Wedding (1997)&quot;,
 &#39;release_date&#39;: 866764800000000000,
 &#39;genres&#39;: &#39;comedy, romance&#39;,
 &#39;age&#39;: 21.0,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4.0
</pre></div>
</div>
</div>
</div>
</section>
<section id="pobieranie-kilku-elementow-ze-zbioru">
<h3>Pobieranie kilku elementów ze zbioru<a class="headerlink" href="#pobieranie-kilku-elementow-ze-zbioru" title="Permalink to this headline">#</a></h3>
<p>Dla tej paczki zbiorów danych przygotowano także metodę take, która umożliwia pobranie kilku elementów ze strumienia</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">display_pretty</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: &#39;259&#39;,
 &#39;item&#39;: &#39;255&#39;,
 &#39;timestamp&#39;: 874731910000000000,
 &#39;title&#39;: &quot;My Best Friend&#39;s Wedding (1997)&quot;,
 &#39;release_date&#39;: 866764800000000000,
 &#39;genres&#39;: &#39;comedy, romance&#39;,
 &#39;age&#39;: 21.0,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4.0
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: &#39;259&#39;,
 &#39;item&#39;: &#39;286&#39;,
 &#39;timestamp&#39;: 874731927000000000,
 &#39;title&#39;: &#39;English Patient, The (1996)&#39;,
 &#39;release_date&#39;: 848016000000000000,
 &#39;genres&#39;: &#39;drama, romance, war&#39;,
 &#39;age&#39;: 21.0,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4.0
</pre></div>
</div>
</div>
</div>
</section>
<section id="wczytanie-zbioru-za-pomoca-dostepnych-loaderow">
<h3>Wczytanie zbioru za pomocą dostępnych loaderów<a class="headerlink" href="#wczytanie-zbioru-za-pomoca-dostepnych-loaderow" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">river.stream</span> <span class="kn">import</span> <span class="n">iter_csv</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">iter_csv</span><span class="p">(</span><span class="n">ds_path</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">display_pretty</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: &#39;259&#39;,
 &#39;item&#39;: &#39;255&#39;,
 &#39;rating&#39;: &#39;4.0&#39;,
 &#39;timestamp&#39;: &#39;874731910000000000&#39;,
 &#39;title&#39;: &quot;My Best Friend&#39;s Wedding (1997)&quot;,
 &#39;release_date&#39;: &#39;866764800000000000&#39;,
 &#39;genres&#39;: &#39;comedy, romance&#39;,
 &#39;age&#39;: &#39;21&#39;,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
</div>
</div>
<p>Jak widzimy, powyżej zbiór wczytany jest w postaci stringów, a zmienna y jest nieznana.
Aby to rozwiązać potrzebujemy zdefiniować dane.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">river.stream</span> <span class="kn">import</span> <span class="n">iter_csv</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">iter_csv</span><span class="p">(</span>
    <span class="n">ds_path</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">target</span><span class="o">=</span><span class="s2">&quot;rating&quot;</span><span class="p">,</span>
    <span class="n">converters</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;rating&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;release_date&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">display_pretty</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: &#39;259&#39;,
 &#39;item&#39;: &#39;255&#39;,
 &#39;timestamp&#39;: 874731910000000000,
 &#39;title&#39;: &quot;My Best Friend&#39;s Wedding (1997)&quot;,
 &#39;release_date&#39;: 866764800000000000,
 &#39;genres&#39;: &#39;comedy, romance&#39;,
 &#39;age&#39;: 21,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4.0
</pre></div>
</div>
</div>
</div>
</section>
<section id="wczytywanie-za-pomoca-bilioteki-pandas">
<h3>Wczytywanie za pomocą bilioteki pandas<a class="headerlink" href="#wczytywanie-za-pomoca-bilioteki-pandas" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">river.stream</span> <span class="kn">import</span> <span class="n">iter_pandas</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">ds_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">df_y</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;rating&quot;</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">iter_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">df_y</span><span class="p">)</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">display_pretty</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259,
 &#39;item&#39;: 255,
 &#39;timestamp&#39;: 874731910000000000,
 &#39;title&#39;: &quot;My Best Friend&#39;s Wedding (1997)&quot;,
 &#39;release_date&#39;: 866764800000000000,
 &#39;genres&#39;: &#39;comedy, romance&#39;,
 &#39;age&#39;: 21,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4.0
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="przetwarzanie-zbioru">
<h2>Przetwarzanie zbioru<a class="headerlink" href="#przetwarzanie-zbioru" title="Permalink to this headline">#</a></h2>
<section id="rozklad-klas-wczytany-caly-zbior">
<h3>Rozkład klas - wczytany cały zbiór<a class="headerlink" href="#rozklad-klas-wczytany-caly-zbior" title="Permalink to this headline">#</a></h3>
<p>Wyświetlijmy teraz rozkład klas. W pierwszej kolejności zróbmy to naiwnie, poprzez wykorzystanie całego zaczytanego zbioru</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">df_y</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">counter</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span> <span class="n">x</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">counter</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">errorbar</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot: &gt;
</pre></div>
</div>
<img alt="../_images/river_ml_introduction_19_1.png" src="../_images/river_ml_introduction_19_1.png" />
</div>
</div>
</section>
<section id="rozklad-klas-podejscie-strumieniowe">
<h3>Rozkład klas - podejście strumieniowe<a class="headerlink" href="#rozklad-klas-podejscie-strumieniowe" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">river.sketch</span> <span class="kn">import</span> <span class="n">Histogram</span>

<span class="n">hist</span> <span class="o">=</span> <span class="n">Histogram</span><span class="p">(</span><span class="n">max_bins</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="n">hist</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">count</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">hist</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">left</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">hist</span><span class="p">],</span> <span class="n">errorbar</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot: &gt;
</pre></div>
</div>
<img alt="../_images/river_ml_introduction_21_1.png" src="../_images/river_ml_introduction_21_1.png" />
</div>
</div>
</section>
<section id="rozklad-klas-podejscie-strumieniowe-przyblizone">
<h3>Rozkład klas - podejście strumieniowe przybliżone<a class="headerlink" href="#rozklad-klas-podejscie-strumieniowe-przyblizone" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">river.sketch</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="n">cms</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">441</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">iter_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">df_y</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">cms</span> <span class="o">=</span> <span class="n">cms</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
    <span class="n">values</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<section id="porownanie-wartosci">
<h4>Porównanie wartości<a class="headerlink" href="#porownanie-wartosci" title="Permalink to this headline">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">val_id</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s2">&quot;Rating&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="p">,</span>
        <span class="s2">&quot;hist_counter&quot;</span><span class="p">,</span>
        <span class="n">hist</span><span class="p">[</span><span class="n">val_id</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
        <span class="s2">&quot;approx_count&quot;</span><span class="p">,</span>
        <span class="n">cms</span><span class="p">[</span><span class="n">value</span><span class="p">],</span>
        <span class="s2">&quot;error&quot;</span><span class="p">,</span>
        <span class="nb">abs</span><span class="p">(</span><span class="n">hist</span><span class="p">[</span><span class="n">val_id</span><span class="p">]</span><span class="o">.</span><span class="n">count</span> <span class="o">-</span> <span class="n">cms</span><span class="p">[</span><span class="n">value</span><span class="p">]),</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Rating 1 hist_counter 6110 approx_count 6110 error 0
Rating 2 hist_counter 11370 approx_count 11370 error 0
Rating 3 hist_counter 27145 approx_count 27145 error 0
Rating 4 hist_counter 34173 approx_count 34174 error 1
Rating 5 hist_counter 21201 approx_count 21201 error 0
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="transformacje-cech">
<h2>Transformacje cech<a class="headerlink" href="#transformacje-cech" title="Permalink to this headline">#</a></h2>
<p>Zacznijmy od transformacji cech, w naszym zbiorze w dalszym ciągu mamy nieprzetworzone timestampy przetwórzmy ja do formatu <code class="docutils literal notranslate"><span class="pre">datetime</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">iter_pandas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">df_y</span><span class="p">)</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">date_column</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span> <span class="s2">&quot;release_date&quot;</span><span class="p">):</span>
        <span class="n">x</span><span class="p">[</span><span class="n">date_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">date_column</span><span class="p">]</span> <span class="o">/</span> <span class="mf">1e9</span><span class="p">)</span>

    <span class="n">display_pretty</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259,
 &#39;item&#39;: 255,
 &#39;timestamp&#39;: datetime.datetime(1997, 9, 20, 7, 5, 10),
 &#39;title&#39;: &quot;My Best Friend&#39;s Wedding (1997)&quot;,
 &#39;release_date&#39;: datetime.datetime(1997, 6, 20, 2, 0),
 &#39;genres&#39;: &#39;comedy, romance&#39;,
 &#39;age&#39;: 21,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;}
</pre></div>
</div>
</div>
</div>
<p>Dodajmy teraz przetwarzanie tytułów za pomocą algorytmu <code class="docutils literal notranslate"><span class="pre">LDA</span></code>. Do tego celu wykorzystamy klase <a class="reference external" href="https://riverml.xyz/0.14.0/api/preprocessing/LDA/"><code class="docutils literal notranslate"><span class="pre">LDA</span></code></a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">river.feature_extraction</span> <span class="kn">import</span> <span class="n">BagOfWords</span>
<span class="kn">from</span> <span class="nn">river.preprocessing</span> <span class="kn">import</span> <span class="n">LDA</span>

<span class="n">bow</span> <span class="o">=</span> <span class="n">BagOfWords</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
<span class="n">lda</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">441</span><span class="p">)</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">bow_title</span> <span class="o">=</span> <span class="n">bow</span><span class="o">.</span><span class="n">learn_one</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">transform_one</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">display_pretty</span><span class="p">(</span><span class="n">lda</span><span class="o">.</span><span class="n">learn_one</span><span class="p">(</span><span class="n">bow_title</span><span class="p">)</span><span class="o">.</span><span class="n">transform_one</span><span class="p">(</span><span class="n">bow_title</span><span class="p">))</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{0: 0.5,
 1: 1.5,
 2: 0.5,
 3: 0.5,
 4: 1.5,
 5: 0.5,
 6: 0.5,
 7: 1.5,
 8: 0.5,
 9: 1.5}
</pre></div>
</div>
</div>
</div>
<p>Złączmy teraz obie funkcje do jednego kodu:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">date_column</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span> <span class="s2">&quot;release_date&quot;</span><span class="p">):</span>
        <span class="n">x</span><span class="p">[</span><span class="n">date_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">date_column</span><span class="p">]</span> <span class="o">/</span> <span class="mf">1e9</span><span class="p">)</span>

        <span class="n">bow_title</span> <span class="o">=</span> <span class="n">bow</span><span class="o">.</span><span class="n">learn_one</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">transform_one</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">x</span><span class="p">[</span><span class="s2">&quot;title_lda&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lda</span><span class="o">.</span><span class="n">learn_one</span><span class="p">(</span><span class="n">bow_title</span><span class="p">)</span><span class="o">.</span><span class="n">transform_one</span><span class="p">(</span><span class="n">bow_title</span><span class="p">)</span>

    <span class="n">display_pretty</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259,
 &#39;item&#39;: 298,
 &#39;timestamp&#39;: datetime.datetime(1997, 9, 20, 7, 5, 54),
 &#39;title&#39;: &#39;Face/Off (1997)&#39;,
 &#39;release_date&#39;: datetime.datetime(1997, 6, 27, 2, 0),
 &#39;genres&#39;: &#39;action, sci_fi, thriller&#39;,
 &#39;age&#39;: 21,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;,
 &#39;title_lda&#39;: {0: 0.5,
  1: 0.5,
  2: 0.5,
  3: 1.5,
  4: 0.5,
  5: 0.5,
  6: 0.5,
  7: 0.5,
  8: 2.5,
  9: 0.5}}
</pre></div>
</div>
</div>
</div>
<p>Zamiast ręcznie pisać cały kod kolejnych transformacji możemy je złączyć w jedną za pomocą klasy <a class="reference external" href="https://riverml.xyz/0.14.0/api/compose/TransformerUnion/"><code class="docutils literal notranslate"><span class="pre">TransformerUnion</span></code></a>. W tym calu musimy jednak mieć naszą metodę transformującą dane za pomocą metody <a class="reference external" href="https://riverml.xyz/0.14.0/api/compose/FuncTransformer/"><code class="docutils literal notranslate"><span class="pre">FuncTransformer</span></code></a>. Napiszmy ją teraz</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">river.compose</span> <span class="kn">import</span> <span class="n">FuncTransformer</span>


<span class="k">class</span> <span class="nc">TimestamptoDateConverter</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">col_name</span> <span class="o">=</span> <span class="n">col_name</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]:</span>
        <span class="c1"># Do not assume incorrectly that something is a date in timestamp format</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">col_name</span><span class="p">],</span> <span class="nb">int</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">col_name</span><span class="si">}</span><span class="s2">_date&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span>
                <span class="n">x</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">col_name</span><span class="p">]</span> <span class="o">/</span> <span class="mf">1e9</span>
            <span class="p">)</span>
        <span class="p">}</span>


<span class="n">date_transform</span> <span class="o">=</span> <span class="n">FuncTransformer</span><span class="p">(</span><span class="n">TimestamptoDateConverter</span><span class="p">(</span><span class="n">col_name</span><span class="o">=</span><span class="s2">&quot;timestamp&quot;</span><span class="p">))</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">x</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">date_transform</span><span class="o">.</span><span class="n">transform_one</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="n">display_pretty</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259,
 &#39;item&#39;: 185,
 &#39;timestamp&#39;: 874731981000000000,
 &#39;title&#39;: &#39;Psycho (1960)&#39;,
 &#39;release_date&#39;: -315619200000000000,
 &#39;genres&#39;: &#39;horror, romance, thriller&#39;,
 &#39;age&#39;: 21,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;,
 &#39;timestamp_date&#39;: datetime.datetime(1997, 9, 20, 7, 6, 21)}
</pre></div>
</div>
</div>
</div>
<p>Teraz połączmy wszystko w jedną aggregację</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">river.compose</span> <span class="kn">import</span> <span class="n">Pipeline</span><span class="p">,</span> <span class="n">TransformerUnion</span>

<span class="n">transforms</span> <span class="o">=</span> <span class="n">TransformerUnion</span><span class="p">(</span>
    <span class="n">FuncTransformer</span><span class="p">(</span><span class="n">TimestamptoDateConverter</span><span class="p">(</span><span class="n">col_name</span><span class="o">=</span><span class="s2">&quot;timestamp&quot;</span><span class="p">)),</span>
    <span class="n">FuncTransformer</span><span class="p">(</span><span class="n">TimestamptoDateConverter</span><span class="p">(</span><span class="n">col_name</span><span class="o">=</span><span class="s2">&quot;release_date&quot;</span><span class="p">)),</span>
<span class="p">)</span>

<span class="n">lda</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">BagOfWords</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">),</span> <span class="n">LDA</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">441</span><span class="p">))</span>

<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">x</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">transforms</span><span class="o">.</span><span class="n">learn_one</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">transform_one</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="n">x</span><span class="p">[</span><span class="s2">&quot;lda&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lda</span><span class="o">.</span><span class="n">learn_one</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">transform_one</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="n">display_pretty</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259,
 &#39;item&#39;: 173,
 &#39;timestamp&#39;: 874732043000000000,
 &#39;title&#39;: &#39;Princess Bride, The (1987)&#39;,
 &#39;release_date&#39;: 536457600000000000,
 &#39;genres&#39;: &#39;action, adventure, comedy, romance&#39;,
 &#39;age&#39;: 21,
 &#39;gender&#39;: &#39;M&#39;,
 &#39;occupation&#39;: &#39;student&#39;,
 &#39;zip_code&#39;: &#39;48823&#39;,
 &#39;release_date_date&#39;: datetime.datetime(1987, 1, 1, 1, 0),
 &#39;timestamp_date&#39;: datetime.datetime(1997, 9, 20, 7, 7, 23),
 &#39;lda&#39;: {0: 0.5,
  1: 0.5,
  2: 0.5,
  3: 1.5,
  4: 1.5,
  5: 0.5,
  6: 0.5,
  7: 0.5,
  8: 0.5,
  9: 2.5}}
</pre></div>
</div>
</div>
</div>
<section id="agregacje">
<h3>Agregacje<a class="headerlink" href="#agregacje" title="Permalink to this headline">#</a></h3>
<p>Aggregacje w bibliotece river wykonujemy za pomocą modułu <a class="reference external" href="https://riverml.xyz/0.14.0/api/feature-extraction/Agg/">Agg</a></p>
</section>
<section id="obliczenie-liczby-recenzji-uzytkownika">
<h3>Obliczenie liczby recenzji użytkownika<a class="headerlink" href="#obliczenie-liczby-recenzji-uzytkownika" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">river.feature_extraction</span> <span class="kn">import</span> <span class="n">TargetAgg</span>
<span class="kn">from</span> <span class="nn">river.stats</span> <span class="kn">import</span> <span class="n">Count</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">iter_pandas</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df_y</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">])</span>

<span class="n">agg</span> <span class="o">=</span> <span class="n">TargetAgg</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="n">Count</span><span class="p">())</span>
<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">display_pretty</span><span class="p">({</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">agg</span><span class="o">.</span><span class="n">learn_one</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">transform_one</span><span class="p">(</span><span class="n">x</span><span class="p">)})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 1}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 2}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 3}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 4}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 5}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 6}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 7}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 8}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 9}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 10}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 11}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 12}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 13}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 14}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 15}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_count_by_user&#39;: 16}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 851, &#39;y_count_by_user&#39;: 1}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 851, &#39;y_count_by_user&#39;: 2}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 851, &#39;y_count_by_user&#39;: 3}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 851, &#39;y_count_by_user&#39;: 4}
</pre></div>
</div>
</div>
</div>
</section>
<section id="aggregacje-typu-rolling">
<h3>Aggregacje typu Rolling<a class="headerlink" href="#aggregacje-typu-rolling" title="Permalink to this headline">#</a></h3>
<p>Średnia ocena recenzja z ostatnich 5</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">river.utils</span> <span class="kn">import</span> <span class="n">Rolling</span>
<span class="kn">from</span> <span class="nn">river.stats</span> <span class="kn">import</span> <span class="n">Mean</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">iter_pandas</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df_y</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">])</span>

<span class="n">agg</span> <span class="o">=</span> <span class="n">TargetAgg</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="n">Rolling</span><span class="p">(</span><span class="n">Mean</span><span class="p">(),</span> <span class="mi">5</span><span class="p">))</span>
<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">display_pretty</span><span class="p">({</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">agg</span><span class="o">.</span><span class="n">learn_one</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">transform_one</span><span class="p">(</span><span class="n">x</span><span class="p">)})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 4.0}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 4.0}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 4.0}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 4.0}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 4.0}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 4.0}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 4.0}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 3.8}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 3.8}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 3.8}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 3.8}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 3.6}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 3.6}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 3.6}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 3.8}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 259, &#39;y_mean_by_user&#39;: 3.8}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 851, &#39;y_mean_by_user&#39;: 2.0}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 851, &#39;y_mean_by_user&#39;: 2.5}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 851, &#39;y_mean_by_user&#39;: 2.6666666666666665}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;user&#39;: 851, &#39;y_mean_by_user&#39;: 3.25}
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./labs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="hierarchical_classification.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Klasyfikacja hierarchiczna</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="concept_drift.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Wykrywanie dryftu konceptu</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Radosław Michalski, Piotr Bródka, Mateusz Nurek, Kamil Tagowski<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>